<div class="quote-view">
  <h3 class="form-title">Persianas</h3>
  <small class="error-message alert" ng-if="enrollable.doable==false">No realizable</small>
  <form name="enrollableForm" role="form" novalidate ng-submit="addProduct('Enrollable', enrollableForm, enrollable)" autocomplete="off">
    <div class="form-group">
      <label>Cant.</label>
      <input type="number" min="1" value="1" step="1" name="quantity" ng-model="enrollable.quantity" class="form-control" ng-change="updatePrices('Enrollable', enrollable)" pattern="[0-9]*" required>
      <small class="error-message" ng-if="enrollableForm.$validated && enrollableForm.quantity.$error.required">Campo
        requerido</small>
    </div>
    <div class="form-group">
      <label>Ubicación</label>
      <input type="text" name="location" ng-model="enrollable.location" class="form-control" required>
      <small class="error-message" ng-if="enrollableForm.$validated && enrollableForm.location.$error.required">Campo
        requerido</small>
    </div>
    <div class="form-group">
      <label>Tipo</label>
      <select name="type" ng-model="enrollable.type" ng-change="updateType('Enrollable', enrollable, color)" class="form-control" required>
        <option value="Solar Screen">Solar Screen</option>
        <option value="Solar Blackout">Solar Blackout</option>
        <option value="Cascade">Cascade</option>
        <option value="Triple Shade">Triple Shade</option>
        <option value="Horizontales de Madera">Horizontales de Madera</option>
        <option value="Enrollables">Enrollables Platinum</option>
        <option value="Romanas">Romanas</option>
        <option value="Eclisse">Eclisse</option>
        <option value="Panel Deslizante">Panel Deslizante</option>
        <option value="Verticales de PVC">Verticales de PVC</option>
        <option value="Horizontales de Aluminio">Horizontales de Aluminio</option>
        <option value="Celular">Celular</option>
      </select>
      <small class="error-message" ng-if="enrollableForm.$validated && enrollableForm.type.$error.required">Campo
        requerido</small>
    </div>


    <div class="form-group" ng-show="productMeta.systems">
      <label>Sistema</label>
      <select name="system" ng-required="productMeta.systems" ng-model="enrollable.system" class="form-control" ng-change="updatePrices('Enrollable', enrollable)">
        <option ng-repeat="system in productMeta.systems" value="{{system}}">{{system}}</option>
      </select>
      <small class="error-message" ng-if="enrollableForm.$validated && !enrollable.system">Campo requerido</small>
    </div>

    <div class="form-group">
      <label ng-hide="showSpinner || productMeta">Color</label>
      <label ng-show="productMeta && !showSpinner">{{productMeta.colorLabel}}</label>
      <input ng-hide="showSpinner" type="text" name="color" id="color" ng-model="color" ng-disabled="!enrollable.type" class="form-control" required uib-typeahead="color.label for color in enrollable.colors | filter: $viewValue | limitTo:12" typeahead-on-select="colorSelected($item, 'Enrollable', enrollable)" typeahead-editable="false">
      <small ng-hide="showSpinner" class="error-message" ng-if="enrollableForm.$validated && enrollableForm.color.$error.required">Campo requerido</small>
      <img ng-show="showSpinner" class="spinner-img" src="img/spinner.gif">
    </div>
    <div class="form-group">
      <label>Config</label>
      <select name="config" ng-model="enrollable.config" class="form-control" ng-disabled="!enrollable.type" required>
        <option ng-repeat="config in productMeta.configs" value="{{config}}">{{config}}</option>
      </select>
      <small class="error-message" ng-if="enrollableForm.$validated && enrollableForm.config.$error.required">Campo
        requerido</small>
    </div>
    <div class="form-group">
      <label>Ancho (metros)</label>
      <input type="number" name="width" id="width" ng-model="enrollable.width" ng-disabled="!color" min="0.1" class="form-control" ng-change="changeWidth('Enrollable', enrollable)" required step="0.1">
      <small class="error-message" ng-if="enrollableForm.$validated && enrollableForm.width.$error.required">Campo
        requerido</small>
    </div>

    <div class="form-group">
      <label>Alto (metros)</label>
      <input type="number" name="height" id="height" ng-model="enrollable.height" ng-disabled="!color" min="0.1" class="form-control" ng-change="changeHeight('Enrollable', enrollable)" required step="0.1">
      <small class="error-message" ng-if="enrollableForm.$validated && enrollableForm.height.$error.required">Campo
        requerido</small>
    </div>
    <div class="form-group">
      <label>m²</label>
      <input type="number" name="m2" ng-model="enrollable.m2" disabled="disabled" min="0" class="form-control" required placeholder="{{enrollable.m2 | number:2}}">
      <small class="error-message" ng-if="enrollableForm.$validated && enrollableForm.m2.$error.required">Campo
        requerido</small>
    </div>
    <div class="form-group" ng-show="enrollable.type=='Enrollables' || enrollable.type == 'Solar Screen' || enrollable.type == 'Solar Blackout'">
      <label>Caída</label>
      <select name="drop" ng-model="enrollable.drop" class="form-control" ng-required="enrollable.type=='Enrollables' || enrollable.type == 'Solar Screen' || enrollable.type == 'Solar Blackout'">
        <option value="Atras">Atras</option>
        <option value="Enfrente">Enfrente</option>
      </select>
      <small class="error-message" ng-if="enrollableForm.$validated && enrollableForm.drop.$error.required">Campo
        requerido</small>
    </div>
    <div class="form-group">
      <label>Mando</label>
      <select name="control" ng-model="enrollable.control" class="form-control" required ng-change="hasControl(enrollable.control)">
        <option value="Izquierda">Izquierda</option>
        <option value="Derecha">Derecha</option>
        <option value="N/A">N/A</option>
      </select>
      <small class="error-message" ng-if="enrollableForm.$validated && enrollableForm.control.$error.required">Campo
        requerido</small>
    </div>
    <div ng-hide="enrollable.control == 'N/A' || !enrollable.control">
      <label>Altura de Mando</label>
      <div>
        <label>
          <input type="checkbox" name="controlHeightCheckbox" id="controlHeightCheckbox" ng-model="controlHeightCheckbox" ng-change="controlHeightChange()" checked> Estándar</label>
      </div>
      <input type="number" name="controlHeight" id="controlHeight" step="0.1" class="form-control" ng-model="enrollable.controlHeight" ng-hide="controlHeightCheckbox == true">
    </div>

    <div ng-show="valid">
      <hr>
      <button type="button" class="btn btn-default" ng-show="!rotated" ng-disabled="!color" style="align-content: center;" ng-click="changeRotation('Enrollable', enrollable, this)">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" style="padding-top: 0.3em" viewbox="0 0 16 16">
          <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
          <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
        </svg>Girar textil</button>
      <button type="button" class="btn btn-primary" ng-show="rotated" ng-disabled="!color" style="align-content: center;" ng-click="changeRotation('Enrollable', enrollable, this)">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" style="padding-top: 0.3em" viewbox="0 0 16 16">
          <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
          <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
        </svg>Cancelar giro de textil</button>
    </div>

    <div ng-show="addingPlus == false && enrollable.plusList.length > 0">
      <hr>
      <button type="button" class="btn btn-default" ng-click="addPlus()">Agregar Adicional</button>
      <hr>
    </div>
    <div class="form-adding" ng-show="addingPlus == true && enrollable.plusList.length > 0">
      <label class="title">Adicional:</label>
      <div class="form-group">
        <label>Cantidad</label>
        <input type="number" ng-model="enrollable.plusQuantity" name="plusQuantity" id="plusQuantity" class="form-control" pattern="[0-9]*">
      </div>
      <div class="form-group">
        <label>Nombre</label>
        <input type="text" ng-model="enrollable.plus" name="plus" id="plus" class="form-control" uib-typeahead="plus as plus.label for plus in enrollable.plusList | filter:$viewValue | limitTo:12" typeahead-editable="false">
      </div>
      <div>
        <button type="button" class="btn btn-secondary-left" ng-click="addPlus(enrollable.plus, enrollable.plusQuantity)">Agregar</button>
        <button type="button" class="btn btn-tertiary-left" ng-click="cancelPlus()">Cancelar</button>
        <hr>
      </div>
    </div>
    <div ng-show="plusList.length > 0">
      <div ng-include="'partials/views/console/quote/additional-details.html'"></div>
    </div>


    <div ng-show="addingMotor == false && enrollable.motorList.length > 0">
      <button type="button" class="btn btn-default" ng-click="addMotor()">Agregar Motorización</button>
      <hr>
    </div>
    <div class="form-adding" ng-show="addingMotor == true && enrollable.motorList.length > 0">
      <label class="title">Motorización:</label>
      <div class="form-group">
        <label>Cantidad</label>
        <input type="number" ng-model="enrollable.motorQuantity" name="motorQuantity" id="motorQuantity" class="form-control" pattern="[0-9]*">
      </div>
      <div class="form-group">
        <label>Nombre</label>
        <input type="text" ng-model="enrollable.motor" name="motor" id="motor" class="form-control" uib-typeahead="motor as motor.label for motor in enrollable.motorList | filter:$viewValue | limitTo:12" typeahead-editable="false">
      </div>
      <div>
        <button type="button" class="btn btn-secondary-left" ng-click="addMotor(enrollable.motor, enrollable.motorQuantity)">Agregar</button>
        <button type="button" class="btn btn-tertiary-left" ng-click="cancelMotor()">Cancelar</button>
      </div>
      <hr>
    </div>
    <div ng-show="motorList.length > 0">
      <div ng-include="'partials/views/console/quote/motor-details.html'"></div>
    </div>
    <br>

    <div class="form-group notes">
      <label>Observaciones</label>
      <textarea name="notes" ng-model="enrollable.notes" class="form-control"></textarea>
    </div>
    <div class="total-configuration">
      <div class="form-group" ng-show="enrollable.unit">
        <label>Precio Metro</label>
        <input ng-currency type="text" name="unit" ng-model="enrollable.unit" class="form-control" disabled="disabled" placeholder="{{enrollable.unit}}">
      </div>
      <div class="form-group" ng-show="enrollable.price">
        <label>Precio Unitario</label>
        <input ng-currency type="text" name="price" ng-model="enrollable.price" class="form-control" disabled="disabled" placeholder="{{enrollable.price}}">
      </div>
      <div class="form-group" ng-show="enrollable.total">
        <label>Total</label>
        <input ng-currency type="text" name="total" ng-model="enrollable.total" class="form-control" disabled="disabled" placeholder="{{enrollable.total}}">
      </div>
    </div>
    <div>
      <button type="submit" class="btn btn-primary-left">Agregar</button>
      <button type="button" class="btn btn-tertiary-left" ng-click="cancelProduct()">Cancelar</button>
    </div>
  </form>

</div>