<div class="movements-view">
    <div class="ibox">
        <div class="ibox-title">
            <h3>Movimientos de OV</h3></div>
            <div class="ibox-content">
                <button ng-repeat="type in types" class="btn" ng-class="(type.value == selectedType)? 'btn-today' : 'btn-secondary-left'" ng-click="typeChange(type.value)">{{type.label}}</button>
                <a class="btn btn-success" href="{{downloadLink}}" ng-hide="isEmpty" download="Movimientos.xlsx">Descargar</a>
                <br>
                <br>
                <p class="input-group pull-left" style="width: 25%; margin-right: 1rem;">
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-calendar" ng-click="openStartDate()">Desde <i class="glyphicon glyphicon-calendar"></i></button>
                    </span>
                    <input name="startDate" type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="startDate" is-open="startDatePopup.opened" datepicker-options="startDateOptions" required="true" close-text="Cerrar" current-text="Hoy" clear-text="Limpiar" alt-input-formats="altInputFormats" ng-change="startDateChange()">
                </p>

                <p class="input-group" style="width: 25%; margin-right: 1rem;">
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-calendar" ng-click="openEndDate()">Hasta <i class="glyphicon glyphicon-calendar"></i></button>
                    </span>
                    <input name="endDate" type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="endDate" is-open="endDatePopup.opened" datepicker-options="endDateOptions" required="true" close-text="Cerrar" current-text="Hoy" clear-text="Limpiar" alt-input-formats="altInputFormats" ng-change="endDateChange()">
                </p>
                
                <div class="table-filter" ng-if="ready" ng-dropdown-multiselect options="availableStatusList" selected-model="statusList" extra-settings="dropdownSettings" events="dropdownEvents" translation-texts="dropdownTranslations"></div>
                <br><br><br><br>

                <div ng-if="ready">
                    <table class="table table-striped table-hover" datatable dt-options="tableOptions" dt-columns="tableColumns" id="table"></table>
                </div>

                <div ng-if="selectedOrderId">
                    <legend>Facturas para Orden No. {{selectedOrderNo}}</legend>
                    <table class="table table-striped table-hover" id="bills-table">
                        <thead>
                            <th>No. de factura</th>
                            <th>Costo</th>
                            <th>Fecha de emisi√≥n</th>
                            <th>Descargar</th>
                            <th ng-if="currentUser.canAdmin">Eliminar</th>
                        </thead>
                        <tbody ng-repeat="bill in bills">
                            <td>{{bill.folio}}</td>
                            <td>{{bill.value | currency}}</td>
                            <td>{{bill.date}}</td>
                            <td><a class="btn btn-success" href="{{bill.downloadLink}}" download="{{bill.filename}}">Descargar</a></td>
                            <td ng-if="currentUser.canAdmin"><button class="btn btn-danger" ng-click="deleteBill(bill.id)">Eliminar</button></td> 
                        </tbody>
                    </table>
                </div>
                <p ng-show="step=='empty'">No hay datos para mostrar</p>
                <p ng-show="step=='loading'">Cargando...</p>
            </div>
        </div>
    </div>
